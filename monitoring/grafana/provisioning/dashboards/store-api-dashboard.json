{
  "annotations": {
    "list": []
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": false,
  "title": "Jumbo Store API Metrics",
  "tags": ["spring-boot", "store-api"],
  "timezone": "browser",
  "panels": [
      {
        "id": 1,
        "title": "Request Rate (req/s)",
        "type": "graph",
        "gridPos": {"x": 0, "y": 0, "w": 12, "h": 8},
        "targets": [
          {
            "expr": "rate(http_server_requests_seconds_count{application=\"jumbo-store-api\"}[1m])",
            "legendFormat": "{{method}} {{uri}} - {{status}}"
          }
        ]
      },
      {
        "id": 2,
        "title": "Response Time (p95)",
        "type": "graph",
        "gridPos": {"x": 12, "y": 0, "w": 12, "h": 8},
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(http_server_requests_seconds_bucket{application=\"jumbo-store-api\"}[1m]))",
            "legendFormat": "{{method}} {{uri}}"
          }
        ]
      },
      {
        "id": 3,
        "title": "Store Search Requests",
        "type": "stat",
        "gridPos": {"x": 0, "y": 8, "w": 6, "h": 4},
        "targets": [
          {
            "expr": "store_search_requests_total{application=\"jumbo-store-api\",type=\"nearest\"}"
          }
        ]
      },
      {
        "id": 4,
        "title": "Store Search Errors",
        "type": "stat",
        "gridPos": {"x": 6, "y": 8, "w": 6, "h": 4},
        "targets": [
          {
            "expr": "store_search_errors_total{application=\"jumbo-store-api\",type=\"error\"}"
          }
        ]
      },
      {
        "id": 5,
        "title": "Cache Hit Rate",
        "type": "gauge",
        "gridPos": {"x": 12, "y": 8, "w": 6, "h": 4},
        "targets": [
          {
            "expr": "rate(cache_gets_total{application=\"jumbo-store-api\",result=\"hit\"}[5m]) / rate(cache_gets_total{application=\"jumbo-store-api\"}[5m]) * 100"
          }
        ]
      },
      {
        "id": 6,
        "title": "JVM Memory Usage",
        "type": "graph",
        "gridPos": {"x": 18, "y": 8, "w": 6, "h": 4},
        "targets": [
          {
            "expr": "jvm_memory_used_bytes{application=\"jumbo-store-api\"}",
            "legendFormat": "{{id}}"
          }
        ]
      },
      {
        "id": 7,
        "title": "Store Search Duration (avg)",
        "type": "graph",
        "gridPos": {"x": 0, "y": 12, "w": 12, "h": 8},
        "targets": [
          {
            "expr": "rate(store_search_duration_seconds_sum{application=\"jumbo-store-api\"}[1m]) / rate(store_search_duration_seconds_count{application=\"jumbo-store-api\"}[1m])",
            "legendFormat": "Average Duration"
          }
        ]
      },
      {
        "id": 8,
        "title": "HTTP Status Codes",
        "type": "graph",
        "gridPos": {"x": 12, "y": 12, "w": 12, "h": 8},
        "targets": [
          {
            "expr": "rate(http_server_requests_seconds_count{application=\"jumbo-store-api\"}[1m])",
            "legendFormat": "{{status}}"
          }
        ]
      },
      {
        "id": 10,
        "title": "Active Threads",
        "type": "graph",
        "gridPos": {"x": 6, "y": 20, "w": 6, "h": 4},
        "targets": [
          {
            "expr": "jvm_threads_live_threads{application=\"jumbo-store-api\"}"
          }
        ]
      },
      {
        "id": 11,
        "title": "CPU Usage",
        "type": "graph",
        "gridPos": {"x": 12, "y": 20, "w": 12, "h": 4},
        "targets": [
          {
            "expr": "system_cpu_usage{application=\"jumbo-store-api\"}",
            "legendFormat": "System CPU"
          },
          {
            "expr": "process_cpu_usage{application=\"jumbo-store-api\"}",
            "legendFormat": "Process CPU"
          }
        ]
    }
  ],
  "refresh": "5s",
  "schemaVersion": 39,
  "version": 1,
  "time": {
    "from": "now-15m",
    "to": "now"
  },
  "timepicker": {},
  "templating": {
    "list": []
  },
  "uid": "jumbo-store-api",
  "style": "dark"
}

